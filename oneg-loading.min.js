!function($){$("body").bind("startLoading",function(){$("BODY").loading("start")}).bind("finishedLoading",function(){$("BODY").loading("finished")});$.fn.loading=function(action,options){var $el=$(this),defaults={loader:"#loader",spinner:".spinner",multiple:false},offset=$el.offset(),width=$el.outerWidth(),height=$el.outerHeight(),loader,spinner,$loader,$spinner,loaderId=$el.data("loader")||Math.floor(Math.random()*1e4+1);$.extend(defaults,defaults,options);loader=defaults.loader;spinner=defaults.spinner;var addLoader=function(item){item=item===undefined?"":item;$("BODY").append("<div id='loader"+item+"' class='load'><div class='shim'></div><div class='spinner'><img src='https://images-na.ssl-images-amazon.com/images/G/01/oneg/img/spinner.gif'></div></div>");$loader=$(loader+item+".load");$spinner=$(loader+item+".load"+" "+spinner)};var createLoader=function(){if(defaults.multiple){if($el.data("loader")===undefined){addLoader(loaderId);$el.data("loader",loaderId)}else{$loader=$(loader+loaderId+".load");$spinner=$(loader+loaderId+".load"+" "+spinner)}}else{findLoader();if($loader===undefined||$loader.length===0){addLoader()}}};var findLoader=function(){var id=$el.data("loader")===undefined?"":$el.data("loader");$loader=$(loader+id+".load");$spinner=$(loader+id+".load"+" "+spinner)};var hideLoader=function(){findLoader();$loader.css("display","none");$el.css("opacity","1");if($el.is("BODY")){undoBody()}};var doBody=function(){$el.css("overflow","hidden");$loader.removeAttr("style");$loader.addClass("fullscreen")};var undoBody=function(){$el.css("overflow","");$loader.removeClass("fullscreen")};var doElement=function(){$loader.height(height).width(width).css("top",offset.top).css("left",offset.left);$loader.css("display","block")};if(action===undefined||action==="start"){createLoader();if($el.is("BODY")){doBody()}else{doElement()}}else if(action==="finished"){hideLoader()}return this}}(window.jQuery);